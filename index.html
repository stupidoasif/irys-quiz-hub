<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IRYS Quiz Hub</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="Asset 1IQ.png" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="IRYS Quiz Hub - Play &amp; Learn About Irys" />
    <meta property="og:description" content="Test your knowledge about Irys, the programmable datachain! Play the interactive quiz now." />
    <meta property="og:image" content="https://irysquizhub.vercel.app/Welcome.png" />
    <meta property="og:url" content="https://irysquizhub.vercel.app/" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="IRYS Quiz Hub - Play &amp; Learn About Irys" />
    <meta name="twitter:description" content="Test your knowledge about Irys, the programmable datachain! Play the interactive quiz now." />
    <meta name="twitter:image" content="https://irysquizhub.vercel.app/Welcome.png" />

    <meta name="description" content="Quiz Time" />

    <!--
      Cross‑browser font loading:
      Use WOFF2/WOFF where available; fall back to OTF if needed.
      Ensure no layout shift by providing font-display: swap.
    -->
    <style>
      /* ========== Base / Reset (safe for all browsers) ========== */
      *, *::before, *::after { box-sizing: border-box; }
      html { -webkit-text-size-adjust: 100%; }
      body { margin: 0; }
      img, video { max-width: 100%; height: auto; }
      button { font: inherit; }

      /* Screen-reader only utility */
      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

      /* ========== Fonts ========== */
      @font-face {
        font-family: 'HouseSans';
        src: url('house-sans-heavy-italic.woff2') format('woff2'),
             url('house-sans-heavy-italic.woff') format('woff'),
             url('house-sans-heavy-italic.otf') format('opentype');
        font-weight: 900;
        font-style: italic;
        font-display: swap;
      }

      :root {
        color-scheme: dark light; /* hint UA */
        --panel: #111935;
        --muted: #9aa3c7;
        --text: #ffffff;
        --accent: #61ffd7;
        --ok: #42d392;
        --bad: #ff6b6b;
        --backdrop: rgba(0, 0, 0, 0.55);
      }

      @media (prefers-color-scheme: light) {
        :root {
          --panel: #f3f6ff;
          --muted: #485072;
          --text: #111827;
          --backdrop: rgba(255, 255, 255, 0.75);
        }
      }

      /* ========== Layout ========== */
      html, body { min-height: 100%; }
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
        color: var(--text);
        display: grid;
        place-items: center;
        position: relative;
        background: #0a0d22; /* fallback when video is off */
        overflow: auto; /* allow scroll on small screens */
      }

      body.hidden-ui .wrap,
      body.hidden-ui footer.site-footer { opacity: 0; pointer-events: none; filter: blur(2px); }

      /* Background video (with fallbacks) */
      #bgVideo {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
        background: #0a0d22 url('Welcome.png') center/cover no-repeat; /* static image fallback */
        pointer-events: none; /* NEVER intercept taps/clicks */
      }

      /* Title (top by default); with .splash it starts centered */
      .irys-title {
        position: fixed;
        top: 16px;
        left: 50%;
        transform: translateX(-50%);
        transition: top .6s ease, transform .6s ease, opacity .4s ease;
        font-family: 'HouseSans', sans-serif;
        font-weight: 900;
        font-style: italic;
        font-size: clamp(28px, 7vw, 64px);
        color: var(--accent);
        letter-spacing: 3px;
        z-index: 10;
        text-align: center;
        pointer-events: none; /* ensure it never intercepts taps */
      }
      .irys-title.splash { top: 50%; transform: translate(-50%, -50%); }

      /* Play button shown on splash */
      #playBtn {
        position: fixed; z-index: 2147483647; /* max stack to beat any overlays */
        left: 50%; top: calc(50% + 90px);
        transform: translate(-50%, -50%);
        background: var(--accent); color: #0a0d22;
        padding: 12px 22px; border: none; border-radius: 12px;
        font-weight: 800; cursor: pointer;
        box-shadow: 0 10px 30px rgba(0,0,0,.35);
        transition: opacity .4s ease, transform .4s ease, filter .15s ease;
        pointer-events: auto; /* ensure clickable even if parent changes */
        touch-action: manipulation; /* remove 300ms delay / double-tap zoom conflicts */
        -webkit-tap-highlight-color: transparent; /* nicer tap on iOS */
      }
      #playBtn:hover { filter: brightness(1.05); }
      #playBtn:focus-visible { outline: 3px solid #fff; outline-offset: 3px; }
      #playBtn.fade { opacity: 0; transform: translate(-50%, -60%) scale(.98); pointer-events: none; }

      .wrap {
        width: 100%; max-width: 960px; padding: 18px; z-index: 1;
        background: var(--backdrop); border-radius: 16px; position: relative;
        transition: opacity .5s ease .2s, filter .5s ease .2s;
        margin: 20vh 12px 72px; /* leave room for title & footer */
      }

      header { display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
      .title { font-weight: 900; letter-spacing: .2px; font-size: clamp(20px, 2.6vw, 32px); }
      .subtitle { color: var(--muted); font-size: 13px; }
      .panel { display: flex; gap: 10px; align-items: center; background: rgba(255,255,255,.08); border-radius: 16px; padding: 10px 12px; }
      .stat { padding: 6px 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,.1); background: rgba(255,255,255,.08); }

      .btn { appearance: none; border: 0; cursor: pointer; border-radius: 12px; padding: 10px 14px; font-weight: 800; background: var(--accent); color: #0a0d22; box-shadow: 0 8px 20px rgba(122,163,255,.25); transition: transform .12s ease, filter .12s ease; }
      .btn:hover { transform: translateY(-1px); filter: brightness(1.05); }
      .btn:active { transform: translateY(1px) scale(.99); }
      .btn:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }
      .btn.line { background: none; color: var(--text); border: 1px solid rgba(255,255,255,.18); }

      .card { background: color-mix(in oklab, var(--panel) 92%, transparent); border-radius: 20px; box-shadow: 0 16px 50px rgba(0,0,0,.45); padding: 16px; position: relative; }

      .q-text { font-size: clamp(16px, 2.2vw, 22px); font-weight: 800; margin: 8px 0 12px; }
      .choices { display: grid; gap: 10px; }
      .choice {
        padding: 12px 14px;
        border-radius: 14px;
        border: 1px solid rgba(255,255,255,.08);
        background: rgba(255,255,255,.06);
        cursor: pointer;
        font-weight: 700;
        color: #ffffff;
        text-align: left;
      }
      .choice:hover { background: rgba(97,255,215,0.25); color: #ffffff; }
      .choice.correct { outline: 2px solid var(--ok); background: rgba(66,211,146,.15); color: #ffffff; }
      .choice.wrong { outline: 2px solid var(--bad); background: rgba(255,107,107,.15); color: #ffffff; }
      .choice:disabled { opacity: .85; cursor: not-allowed; }
      .choice:focus-visible { outline: 3px solid #fff; }

      .next-btn {
        margin-top: 12px;
        display: none;
        width: 100%;
        text-align: center;
        background: var(--accent);
        color: #0a0d22;
        font-weight: 800;
        border-radius: 12px;
        padding: 12px 16px;
        cursor: pointer;
      }
      .next-btn:hover { filter: brightness(1.05); }
      .next-btn:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }

      .created-by { text-align: center; color: var(--muted); font-size: 12px; margin-top: 10px; }
      .created-by a { color: var(--accent); text-decoration: none; font-weight: 600; }
      .created-by a:hover { text-decoration: underline; }

      footer.site-footer {
        position: fixed; bottom: 10px; left: 0; right: 0; z-index: 5; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; color: var(--muted); font-size: 12px; transition: opacity .5s ease .2s, filter .5s ease .2s;
        gap: 12px; flex-wrap: wrap;
      }
      footer.site-footer a { color: var(--accent); text-decoration: none; font-weight: 500; }
      footer.site-footer a:hover { text-decoration: underline; }

      /* High contrast / Windows forced-colors support */
      @media (forced-colors: active) {
        .choice, .btn, #playBtn, .next-btn { border: 1px solid ButtonText; }
        .irys-title { color: CanvasText; }
      }

      /* Respect reduced motion: pause video + simplify transitions */
      @media (prefers-reduced-motion: reduce) {
        * { animation: none !important; transition: none !important; }
        #bgVideo { display: none; }
        body { background-image: url('Welcome.png'); background-size: cover; background-position: center; }
      }

      /* Small screens: keep everything usable */
      @media (max-width: 420px) {
        .panel { width: 100%; justify-content: space-between; }
        .wrap { margin-top: 28vh; }
      }
    </style>
  </head>
  <body class="hidden-ui">
    <noscript>
      <div style="padding:12px; background:#ffefef; color:#111; max-width:960px; margin:16px; border-radius:8px; font: 14px/1.4 system-ui">
        JavaScript is required to run the quiz. Please enable it in your browser settings.
      </div>
    </noscript>

    <!-- Background video with broadly compatible attributes -->
    <video id="bgVideo" autoplay muted loop playsinline preload="metadata" aria-hidden="true">
      <source src="bg.mp4" type="video/mp4" />
      <!-- Optional additional sources for wider codec support
      <source src="bg.webm" type="video/webm" />
      -->
      Your browser does not support the video tag.
    </video>

    <!-- Title starts in center as splash -->
    <div id="irysTitle" class="irys-title splash" role="heading" aria-level="1">IRYS QUIZ HUB</div>
    <button id="playBtn" type="button" aria-label="Play the quiz">Play</button>

    <div class="wrap" role="region" aria-label="Quiz container">
      <header>
        <div>
          <div class="title">Quiz Game</div>
          <div class="subtitle">Test your knowledge with style</div>
        </div>
        <div class="panel" role="group" aria-label="Stats and controls">
          <div class="stat">Score: <b id="score">0</b></div>
          <div class="stat">Q: <b id="qNum">0</b>/<b id="qTotal">0</b></div>
          <div class="stat">Best: <b id="best">0</b></div>
          <button class="btn" id="startBtn" type="button">Start Quiz</button>
        </div>
      </header>

      <main class="card" id="game" aria-live="polite">
        <div class="q-text" id="qText">Click Start to begin the quiz.</div>
        <div class="choices" id="choices"></div>
        <button id="nextBtn" class="next-btn" type="button">Next</button>
        <div class="created-by">© 2025 Created by <a href="https://x.com/stupidoasif" target="_blank" rel="noopener noreferrer">@stupidoasif</a></div>
        <div id="ariaStatus" class="sr-only" aria-live="polite"></div>
      </main>
    </div>

    <footer class="site-footer">
      <div class="footer-left">
        <a href="https://irys.xyz/" target="_blank" rel="noopener noreferrer">Learn more about Irys</a>
      </div>
      <div class="footer-right">
        <a href="https://x.com/irys_xyz" target="_blank" rel="noopener noreferrer">Twitter</a>
        <span aria-hidden="true">|</span>
        <a href="https://discord.com/invite/irys" target="_blank" rel="noopener noreferrer">Discord</a>
      </div>
    </footer>

    <script>
      (function(){
        'use strict';

        // Run after DOM is ready just in case some browsers parse slower
        function onReady(fn){
          if (document.readyState === 'complete' || document.readyState === 'interactive') {
            setTimeout(fn, 0);
          } else {
            document.addEventListener('DOMContentLoaded', fn);
          }
        }

        onReady(function(){
          // === 1) Questions (unchanged except formatting) ===
          const QUESTIONS_ALL = [
            { q: "What is Irys?", a: ["A DeFi protocol","A blockchain explorer","A programmable datachain","A crypto wallet"], correct: 2 },
            { q: "What was Irys called before rebranding?", a: ["FileLink","DataNet","Bundlr Network","ArChain"], correct: 2 },
            { q: "What layer of blockchain is Irys?", a: ["Off chain protocol","Layer 0","Layer 1","Layer 2"], correct: 2 },
            { q: "Who founded Irys?", a: ["Do Kwon","Josh Benaron","Anatoly Yakovenko","Vitalik Buterin"], correct: 1 },
            { q: "What does Irys make programmable?", a: ["Data","Tokens","Smart contracts","Wallets"], correct: 0 },
            { q: "What does pay once, store forever mean in Irys?", a: ["Annual subscription","Lifetime data permanence","Temporary uploads","Monthly data payment"], correct: 1 },
            { q: "Irys primarily targets which domains?", a: ["Hardware supply","AI and Web3","Travel only","Social media only"], correct: 1 },
            { q: "Which tooling is Irys compatible with?", a: ["EVM Ethereum","Bitcoin","Solana","Polkadot"], correct: 0 },
            { q: "What powers Irys consensus?", a: ["Proof of Authority","Proof of Stake only","Proof of Burn","Hybrid Proof of Work and Proof of Stake"], correct: 3 },
            { q: "What is the Irys virtual machine called?", a: ["SmartVM","IrysVM","DataVM","ChainVM"], correct: 1 },
            { q: "Irys aims to make data", a: ["Static and archived","Programmable and valuable","Centralized and private","Unverifiable"], correct: 1 }
          ];

          // === 2) Helper: Fisher–Yates shuffle ===
          function shuffle(arr){
            for(let i=arr.length-1;i>0;i--){
              const j = Math.floor(Math.random()*(i+1));
              [arr[i],arr[j]]=[arr[j],arr[i]];
            }
            return arr;
          }

          // === 3) Pick 10 random questions on each load/start ===
          let CURRENT = [];
          let idx = 0, score = 0, answered = false;

          const scoreEl = document.getElementById('score');
          const qNumEl = document.getElementById('qNum');
          const qTotalEl = document.getElementById('qTotal');
          const qText = document.getElementById('qText');
          const choicesEl = document.getElementById('choices');
          const nextBtn = document.getElementById('nextBtn');
          const playBtn = document.getElementById('playBtn');
          const irysTitle = document.getElementById('irysTitle');
          const ariaStatus = document.getElementById('ariaStatus');
          const bgVideo = document.getElementById('bgVideo');
          const startBtn = document.getElementById('startBtn');
          const bestEl = document.getElementById('best');

          // High score persistence
          let best = 0;
          try {
            const saved = localStorage.getItem('bestScore');
            best = saved ? Number(saved) || 0 : 0;
          } catch(_) { best = 0; }
          if (bestEl) bestEl.textContent = String(best);

          // Defensive: bail if play button missing
          if (!playBtn) return;

          // Splash -> UI reveal
          function handlePlay(){
            // guard: only run once
            if (document.body.classList.contains('ui-shown')) return;
            document.body.classList.add('ui-shown');
            try { playBtn.blur(); } catch(_) {}
            playBtn.classList.add('fade');
            if (irysTitle) irysTitle.classList.remove('splash');
            document.body.classList.remove('hidden-ui');
            // Scroll to content as a visual confirmation
            try { document.getElementById('game').scrollIntoView({behavior:'smooth', block:'start'}); } catch(_) {}
            try { if (bgVideo && bgVideo.paused) { bgVideo.muted = true; bgVideo.play().catch(function(){}); } } catch(_) {}
          }); }
            } catch(_) {}
          }
          function handlePlay(){
            // guard: only run once
            if (document.body.classList.contains('ui-shown')) return;
            document.body.classList.add('ui-shown');
            playBtn.classList.add('fade');
            if (irysTitle) irysTitle.classList.remove('splash');
            document.body.classList.remove('hidden-ui');
            try { if (bgVideo && bgVideo.paused) { bgVideo.muted = true; bgVideo.play().catch(function(){}); } } catch(_) {}
          }
          // Use pointer events to cover all input types
          // unified inputs
          ['pointerup','click','touchend','touchstart','mousedown'].forEach(function(type){
            playBtn.addEventListener(type, function(e){
              try { e.preventDefault(); } catch(_) {}
              handlePlay();
            }, false);
          });
          // unified inputs
          ['pointerup','click','touchend','touchstart','mousedown'].forEach(function(type){
            playBtn.addEventListener(type, function(e){
              try { e.preventDefault(); } catch(_) {}
              handlePlay();
            }, false);
          });
          // unified inputs
          ['pointerup','click','touchend','touchstart','mousedown'].forEach(function(type){
            playBtn.addEventListener(type, function(e){
              try { e.preventDefault(); } catch(_) {}
              handlePlay();
            }, false);
          }); handlePlay(); }, { passive: false });
            if (irysTitle) irysTitle.classList.remove('splash'); // moves to top smoothly
            document.body.classList.remove('hidden-ui'); // show UI
            try {
              if (bgVideo && bgVideo.paused) { bgVideo.muted = true; bgVideo.play().catch(function(){}); }
            } catch(_) {}
          });

          function initQuiz(){
            const pool = shuffle([].concat(QUESTIONS_ALL));
            CURRENT = pool.slice(0, Math.min(10, pool.length));
            if (qTotalEl) qTotalEl.textContent = String(CURRENT.length);
            idx = 0; score = 0; render();
            if (startBtn) startBtn.textContent = 'Start Quiz';
          }

          function render(){
            answered = false;
            if (qNumEl) qNumEl.textContent = String(idx + 1);
            const q = CURRENT[idx];
            if (qText) qText.textContent = q.q;
            if (choicesEl) choicesEl.innerHTML = '';
            if (nextBtn) {
              nextBtn.style.display = 'none';
              nextBtn.textContent = (idx === CURRENT.length - 1) ? 'Finish Quiz' : 'Next';
            }

            q.a.forEach(function(t, i){
              const b = document.createElement('button');
              b.className = 'choice';
              b.type = 'button';
              b.textContent = t;
              b.setAttribute('aria-pressed', 'false');
              b.addEventListener('click', function(){ choose(i); });
              b.addEventListener('keydown', function(ev){
                if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); choose(i); }
              });
              choicesEl.appendChild(b);
            });

            if (ariaStatus) ariaStatus.textContent = 'Question ' + (idx + 1) + ' of ' + CURRENT.length;
          }

          function choose(i){
            if (answered) return;
            answered = true;
            const q = CURRENT[idx];
            const btns = Array.prototype.slice.call(document.querySelectorAll('.choice'));
            btns.forEach(function(b){ b.disabled = true; b.setAttribute('aria-pressed', 'true'); });
            if (i === q.correct){
              score += 10;
              btns[i].classList.add('correct');
              if (ariaStatus) ariaStatus.textContent = 'Correct!';
            } else {
              btns[i].classList.add('wrong');
              btns[q.correct].classList.add('correct');
              if (ariaStatus) ariaStatus.textContent = 'Wrong. Highlighted answer is correct.';
            }
            if (scoreEl) scoreEl.textContent = String(score);
            if (nextBtn){ nextBtn.style.display = 'block'; nextBtn.focus({ preventScroll: true }); }
          }

          if (nextBtn) {
            nextBtn.addEventListener('click', function(){
              if (idx < CURRENT.length - 1){ idx++; render(); }
              else { end(); }
            });
          }

          function end(){
            if (qText) qText.textContent = 'Quiz complete! Final score: ' + score;
            if (choicesEl) choicesEl.innerHTML = '';
            if (nextBtn) nextBtn.style.display = 'none';
            if (ariaStatus) ariaStatus.textContent = 'Quiz complete';
            // Update and persist best score
            try {
              if (score > best) {
                best = score;
                localStorage.setItem('bestScore', String(best));
                if (bestEl) bestEl.textContent = String(best);
              }
            } catch(_) {}
            if (startBtn) startBtn.textContent = 'Play Again';
          }

          // Start button initializes a fresh random set of 10 each time
          if (startBtn) {
            startBtn.addEventListener('click', function(){ initQuiz(); });
          }

          // Pick a random set immediately so reload changes the set before clicking Start
          window.addEventListener('load', function(){
            const pool = shuffle([].concat(QUESTIONS_ALL));
            CURRENT = pool.slice(0, Math.min(10, pool.length));
            if (qTotalEl) qTotalEl.textContent = String(CURRENT.length);
          });

          // Respect reduced motion and/or user data saver: pause video if either is on
          try {
            var prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');
            var dataSaver = (typeof navigator !== 'undefined' && 'connection' in navigator && navigator.connection && navigator.connection.saveData);
            if ((prefersReducedMotion && prefersReducedMotion.matches) || dataSaver) {
              if (bgVideo) { bgVideo.pause(); bgVideo.currentTime = 0; }
            }
          } catch(_) {}
        });
      })();
    </script>
  </body>
</html>
